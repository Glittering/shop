{% extends 'admin/admin_base.html' %}
{% block title %}
    {{ super() }}
{% endblock %}

{% block js %}
    {{ super() }}
    <script type="text/javascript" charset="utf-8"
            src="{{ url_for('static', filename='ueditor/ueditor.config.js') }}"></script>
    <script type="text/javascript" charset="utf-8"
            src="{{ url_for('static', filename='ueditor/ueditor.all.min.js') }}"></script>
    <script type="text/javascript" charset="utf-8"
            src="{{ url_for('static', filename='ueditor/lang/zh-cn/zh-cn.js') }}"></script>

{% endblock %}

{% block content %}

    <div class="container-fluid">

        <div class="row-fluid">
            {% for msg in get_flashed_messages(category_filter=["err"]) %}
                <p class="login-box-msg" style="color: red">{{ msg }}</p>
            {% endfor %}
            {% for msg in get_flashed_messages(category_filter=["ok"]) %}
                <p class="login-box-msg" style="color: green">{{ msg }}</p>
            {% endfor %}
            <form role="form" method="post">
                <fieldset>
                    <!--商品标题--->
                    <div class="form-group">
                        <label for="input_name"><span
                                class="glyphicon glyphicon-user"></span>&nbsp;{{ form.name.label }}
                        </label>
                        {{ form.name }}
                    </div>
                    {% for err in form.name.errors %}
                        <div class="col-md-12"></div>
                        <font style="color: red">{{ err }}</font>
                    {% endfor %}
                    <!--商品分类--->
                    <div class="form-group">
                        <label for="input_name"><span
                                class="glyphicon glyphicon-user"></span>&nbsp;{{ form.good_tag.label }}
                        </label>
                        {{ form.good_tag }}
                    </div>
                    {% for err in form.good_tag.errors %}
                        <div class="col-md-12"></div>
                        <font style="color: red">{{ err }}</font>
                    {% endfor %}
                    <!--章节数量--->
                    <div class="form-group">
                        <label for="input_name"><span
                                class="glyphicon glyphicon-user"></span>&nbsp;{{ form.chap_num.label }}
                        </label>
                        {{ form.chap_num }}
                    </div>
                    {% for err in form.chap_num.errors %}
                        <div class="col-md-12"></div>
                        <font style="color: red">{{ err }}</font>
                    {% endfor %}
                    <!--商品原价--->
                    <div class="form-group">
                        <label for="input_name"><span
                                class="glyphicon glyphicon-user"></span>&nbsp;{{ form.price.label }}
                        </label>
                        {{ form.price }}
                    </div>
                    {% for err in form.price.errors %}
                        <div class="col-md-12"></div>
                        <font style="color: red">{{ err }}</font>
                    {% endfor %}
                    <!--折扣价--->
                    <div class="form-group">
                        <label for="input_name"><span
                                class="glyphicon glyphicon-user"></span>&nbsp;{{ form.old_price.label }}
                        </label>
                        {{ form.old_price }}
                    </div>
                    {% for err in form.old_price.errors %}
                        <div class="col-md-12"></div>
                        <font style="color: red">{{ err }}</font>
                    {% endfor %}
                    <!--星级--->
                    <div class="form-group">
                        <label for="input_name"><span
                                class="glyphicon glyphicon-user"></span>&nbsp;{{ form.start.label }}
                        </label>
                        {{ form.start }}
                    </div>
                    {% for err in form.start.errors %}
                        <div class="col-md-12"></div>
                        <font style="color: red">{{ err }}</font>
                    {% endfor %}
                    <!--简介--->
                    <div class="form-group">
                        <label for="input_name"><span
                                class="glyphicon glyphicon-user"></span>&nbsp;{{ form.info.label }}
                        </label>
                         <script id="editor" type="text/plain">{{ form.info }}</script>
                    </div>
                    {% for err in form.info.errors %}
                        <div class="col-md-12"></div>
                        <font style="color: red">{{ err }}</font>
                    {% endfor %}




                    <!--是否上架--->
                    <div class="form-group">
                        <label for="input_name"><span
                                class="glyphicon glyphicon-user"></span>&nbsp;{{ form.target.label }}
                        </label>
                        {{ form.target }}
                    </div>
                    {% for err in form.target.errors %}
                        <div class="col-md-12"></div>
                        <font style="color: red">{{ err }}</font>
                    {% endfor %}
                    {{ form.csrf_token }}
                    {{ form.submit }}
                </fieldset>
            </form>
        </div>
    </div>

    <script type="text/javascript">
        //实例化编辑器
        //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
        var ue = UE.getEditor('editor', {
            serverUrl: "/upload/"
        });
    </script>
{% endblock %}






